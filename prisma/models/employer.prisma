// ##########----------Employer Profile Model----------##########
model Employer {
    id                    String             @id @default(uuid())
    userId                String?            @unique
    associateId           String?
    associateSubAdminId   String?
    employerId            String?            @unique
    name                  String?
    email                 String?
    password              String
    mobile                String?
    gst                   String?
    pan                   String?
    cin                   String?
    signedMasterAgreement String?
    kycDocuments          String?
    boardResolution       String?
    onboardingSOP         String?
    additionalDoc         String?
    approvalEmail         String?
    step                  Int?               @default(1)
    isPassGenerated       Boolean?           @default(false)
    legalIdentity         LegalIdentityType?
    createdAt             DateTime           @default(now())
    updatedAt             DateTime           @updatedAt
    isDeleted             Boolean            @default(false)
    isActive              Boolean            @default(false)
    gstVerified           Boolean            @default(false)
    panverified           Boolean            @default(false)
    user                  CustomUser?        @relation(fields: [userId], references: [id], onDelete: Cascade)
    associate             Associate?         @relation(fields: [associateId], references: [id], onDelete: Cascade)
    associateSubAdmin     AssociateSubAdmin? @relation(fields: [associateSubAdminId], references: [id], onDelete: Cascade)

    employees                       Employee[]
    employerBusinessDetails         EmployerBusinessDetails?
    EmployerLocationDetails         EmployerLocationDetails[]
    EmployerCompanyPolicies         EmployerCompanyPolicies?
    EmployerContractType            EmployerContractType[]
    employerSubAdmin                EmployerSubAdmin[]
    EmployerRole                    EmployerRole[]
    EmployerModule                  EmployerModule[]
    AssignVariantProductToEmployer  AssignVariantProductToEmployer[]
    EmployerContractTypeCombination EmployerContractTypeCombination[]
    AllocateProductToEmployer       AllocateProductToEmployer[]
    EmployerActivityLogs            EmployerActivityLogs[]
    EmployerTicket                  EmployerTicket[]
}

// ####################--------------------Employer Role And Module Model--------------------####################
model EmployerRole {
    id         String    @id @default(uuid())
    employerId String?
    roleName   String?
    createdAt  DateTime  @default(now())
    updatedAt  DateTime  @updatedAt
    isDeleted  Boolean   @default(false)
    employer   Employer? @relation(fields: [employerId], references: [id], onDelete: Cascade)

    EmployerModule   EmployerModule[]
    EmployerSubAdmin EmployerSubAdmin[]
}

model EmployerModule {
    id         String        @id @default(uuid())
    employerId String?
    roleId     String?
    moduleName String?
    createdAt  DateTime      @default(now())
    updatedAt  DateTime      @updatedAt
    isDeleted  Boolean       @default(false)
    role       EmployerRole? @relation(fields: [roleId], references: [id], onDelete: Cascade)
    employer   Employer?     @relation(fields: [employerId], references: [id], onDelete: Cascade)

    EmployerSubAdminModule EmployerSubAdminModule[]
}

// ####################--------------------Industry Type Model--------------------####################
model IndustryType {
    id        String   @id @default(uuid())
    name      String?
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    isDeleted Boolean  @default(false)

    EmployerBusinessDetails EmployerBusinessDetails[]
}

// ##########----------Employer Business Details Model----------##########
model EmployerBusinessDetails {
    id                  String    @id @default(uuid())
    employerId          String?   @unique
    industryTypeId      String?
    businessLocation    String?
    businessDescription String?
    establishmentDate   DateTime?
    countryId           String?
    stateId             String?
    districtId          String?
    pincode             String?
    createdAt           DateTime  @default(now())
    updatedAt           DateTime  @updatedAt
    isDeleted           Boolean   @default(false)
    isVerified          Boolean   @default(false)

    employer     Employer?     @relation(fields: [employerId], references: [id], onDelete: Cascade)
    country      Country?      @relation(fields: [countryId], references: [id])
    state        State?        @relation(fields: [stateId], references: [id])
    district     District?     @relation(fields: [districtId], references: [id])
    industryType IndustryType? @relation(fields: [industryTypeId], references: [id])
}

// ##########----------Employer Business Details Model----------##########
model EmployerLocationDetails {
    id            String   @id @default(uuid())
    employerId    String?
    workspaceName String?
    noOfEmployees Int?
    address       String?
    countryId     String?
    stateId       String?
    districtId    String?
    createdAt     DateTime @default(now())
    updatedAt     DateTime @updatedAt
    isDeleted     Boolean  @default(false)

    employer Employer? @relation(fields: [employerId], references: [id], onDelete: Cascade)
    country  Country?  @relation(fields: [countryId], references: [id])
    state    State?    @relation(fields: [stateId], references: [id])
    district District? @relation(fields: [districtId], references: [id])

    AllocateProductToEmployer AllocateProductToEmployer[]
    EmploymentDetails         EmploymentDetails[]
    ContractCombinationRuleBook ContractCombinationRuleBook[]
}

// ##########----------Employer Business Details Model----------##########
model EmployerCompanyPolicies {
    id                 String   @id @default(uuid())
    employerId         String?  @unique
    noticePeriod       Int?
    probationPeriod    Int?
    annualLeaves       Int?
    sickLeaves         Int?
    casualLeaves       Int?
    maternityLeaves    Int?
    overtimePolicy     String?
    registrationPolicy String?
    remoteworkPolicy   String?
    otherPolicies      String?
    createdAt          DateTime @default(now())
    updatedAt          DateTime @updatedAt
    isDeleted          Boolean  @default(false)

    employer Employer? @relation(fields: [employerId], references: [id], onDelete: Cascade)
}

// ##########----------Contract Type Model----------##########
model ContractType {
    id                   String                 @id @default(uuid())
    name                 String?
    description          String?
    createdAt            DateTime               @default(now())
    updatedAt            DateTime               @updatedAt
    isDeleted            Boolean                @default(false)
    EmployerContractType EmployerContractType[]
}

// ##########----------Employer Contract Type Model----------##########
model EmployerContractType {
    id             String   @id @default(uuid())
    employerId     String?
    contractTypeId String?
    createdAt      DateTime @default(now())
    updatedAt      DateTime @updatedAt
    isDeleted      Boolean  @default(false)

    employer     Employer?     @relation(fields: [employerId], references: [id], onDelete: Cascade)
    contractType ContractType? @relation(fields: [contractTypeId], references: [id], onDelete: Cascade)

    EmployerContractTypeCombination EmployerContractTypeCombination[]
    EmploymentDetails               EmploymentDetails[]
}

// ##########----------Employer Contract Type Combination Model----------##########
model EmployerContractTypeCombination {
    id               String   @id @default(uuid())
    employerId       String?
    contractTypeId   String?
    uniqueId         String?
    triggerNextMonth Boolean?
    accuralStartAt   DateTime
    accuralEndAt     DateTime
    payoutDate       DateTime
    createdAt        DateTime @default(now())
    updatedAt        DateTime @updatedAt
    isDeleted        Boolean  @default(false)

    employer     Employer?             @relation(fields: [employerId], references: [id], onDelete: Cascade)
    contractType EmployerContractType? @relation(fields: [contractTypeId], references: [id], onDelete: Cascade)

    ContractCombinationRuleBook ContractCombinationRuleBook[]
    EmploymentDetails           EmploymentDetails[]
}

// ##########----------Payout Dates Model----------##########
model ContractCombinationRuleBook {
    id                    String   @id @default(uuid())
    contractCombinationId String?
    workLoacationId       String?
    workingPeriod         Int?
    createdAt             DateTime @default(now())
    updatedAt             DateTime @updatedAt
    isDeleted             Boolean  @default(false)

    contractCombination EmployerContractTypeCombination? @relation(fields: [contractCombinationId], references: [id], onDelete: Cascade)
    workLocation        EmployerLocationDetails?         @relation(fields: [workLoacationId], references: [id], onDelete: Cascade)

    AllocateProductToEmployer AllocateProductToEmployer[]
}

// ##########----------Allocate Product To Employer Model----------##########
model AllocateProductToEmployer {
    id               String   @id @default(uuid())
    employerId       String?
    ruleBookId       String?
    emplyerManagerId String?
    productVariantId String?
    workLocationId   String?
    note             String?
    createdAt        DateTime @default(now())
    updatedAt        DateTime @updatedAt
    isDeleted        Boolean  @default(false)

    employer        Employer?                    @relation(fields: [employerId], references: [id], onDelete: Cascade)
    ruleBook        ContractCombinationRuleBook? @relation(fields: [ruleBookId], references: [id], onDelete: Cascade)
    employerManager AssociateSubAdmin?           @relation(fields: [emplyerManagerId], references: [id], onDelete: Cascade)
    productVariant  VariantProduct?              @relation(fields: [productVariantId], references: [id], onDelete: Cascade)
    workLocation    EmployerLocationDetails?     @relation(fields: [workLocationId], references: [id], onDelete: Cascade)
}

// ##########----------Employer Activity Logs----------##########
model EmployerActivityLogs {
    id                 String   @id @default(uuid())
    employerId         String?
    employerSubAdminId String?
    action             String?
    deviceIp           String?
    createdAt          DateTime @default(now())
    updatedAt          DateTime @updatedAt

    employer         Employer?         @relation(fields: [employerId], references: [id], onDelete: Cascade)
    employerSubAdmin EmployerSubAdmin? @relation(fields: [employerSubAdminId], references: [id], onDelete: Cascade)
}

// ##########----------Employer Tickets----------##########
model EmployerTicket {
    id          String   @id @default(uuid())
    employerId  String?
    title       String?
    status      Ticket?  @default(PENDING)
    description String?
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt

    employer Employer? @relation(fields: [employerId], references: [id], onDelete: Cascade)
}
