// ##########----------Product Category Model----------##########
model ProductCategory {
    id           String   @id @default(uuid())
    categoryName String?  @db.VarChar(100)
    createdAt    DateTime @default(now())
    updatedAt    DateTime @updatedAt
    isDeleted    Boolean  @default(false)

    MasterProduct              MasterProduct[]
    MasterProductUpdateRequest MasterProductUpdateRequest[]
}

// ##########----------Product Purpose Model----------##########
model ProductPurpose {
    id        String   @id @default(uuid())
    purpose   String?
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    isDeleted Boolean  @default(false)

    MasterProductPurpose        MasterProductPurpose[]
    masterProductPurposeUpdates MasterProductPurposeUpdate[]
}

// ##########----------Product Segment Model----------##########
model ProductSegment {
    id        String   @id @default(uuid())
    name      String?
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    isDeleted Boolean  @default(false)

    MasterProductSegment       MasterProductSegment[]
    MasterProductSegmentUpdate MasterProductSegmentUpdate[]
}

// ##########----------Loan Type Model----------##########
model LoanType {
    id        String   @id @default(uuid())
    name      String?
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    isDeleted Boolean  @default(false)

    MasterProduct              MasterProduct[]
    MasterProductUpdateRequest MasterProductUpdateRequest[]
}

// ##########----------Product Partner Model----------##########
model ProductPartner {
    id        String   @id @default(uuid())
    name      String?
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    isDeleted Boolean  @default(false)

    MasterProduct               MasterProduct[]
    MasterProductUpdateRequest  MasterProductUpdateRequest[]
    VariantProduct              VariantProduct[]
    VariantProductUpdateRequest VariantProductUpdateRequest[]
}

// ##########----------Disbursement Mode Model----------##########
model DisbursementMode {
    id        String   @id @default(uuid())
    name      String?
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    isDeleted Boolean  @default(false)

    FinancialDisbursementMode       FinancialDisbursementMode[]
    FinancialDisbursementModeUpdate FinancialDisbursementModeUpdate[]
}

// ##########----------Repayment Mode Model----------##########
model RepaymentModes {
    id        String   @id @default(uuid())
    name      String?
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    isDeleted Boolean  @default(false)

    FinancialRepaymentMode       FinancialRepaymentMode[]
    FinancialRepaymentModeUpdate FinancialRepaymentModeUpdate[]
}

// ##########----------Master Product Model----------##########
model MasterProduct {
    id                 String          @id @default(uuid())
    productManagerId   String?
    productCategoryId  String?
    productName        String?         @db.VarChar(100)
    productId          String?         @db.VarChar(100)
    productCode        String?         @db.VarChar(100)
    productDescription String?         @db.VarChar(100)
    versionId          Int
    loanTypeId         String
    deliveryChannel    DeliveryChannel
    partnerId          String?
    status             ProductStatus   @default(Draft)
    createdAt          DateTime        @default(now())
    updatedAt          DateTime        @updatedAt
    isDeleted          Boolean         @default(false)

    productCategory ProductCategory?   @relation(fields: [productCategoryId], references: [id], onDelete: Cascade)
    productManager  AssociateSubAdmin? @relation(fields: [productManagerId], references: [id], onDelete: Cascade)
    loanType        LoanType?          @relation(fields: [loanTypeId], references: [id], onDelete: Cascade)
    productPartner  ProductPartner?    @relation(fields: [partnerId], references: [id], onDelete: Cascade)

    financialTerms            FinancialTerms?
    eligibilityCriteria       EligibilityCriteria?
    creditBureauConfig        CreditBureauConfig?
    masterProductOtherCharges MasterProductOtherCharges?
    MasterProductDocument     MasterProductDocument?

    MasterProductPurpose       MasterProductPurpose[]
    FinancialDisbursementMode  FinancialDisbursementMode[]
    FinancialRepaymentMode     FinancialRepaymentMode[]
    VariantProduct             VariantProduct[]
    MasterProductUpdateRequest MasterProductUpdateRequest[]
    MasterProductVersion       MasterProductVersion[]
    MasterProductSegment       MasterProductSegment[]
    MasterProductDeleteRequest MasterProductDeleteRequest[]
}

// ##########----------Master Product Purpose Model----------##########
model MasterProductPurpose {
    id              String  @id @default(uuid())
    masterProductId String
    purposeId       String

    masterProduct  MasterProduct  @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    productPurpose ProductPurpose @relation(fields: [purposeId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Segment Model----------##########
model MasterProductSegment {
    id              String  @id @default(uuid())
    masterProductId String
    segmentId       String

    masterProduct  MasterProduct  @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    productSegment ProductSegment @relation(fields: [segmentId], references: [id], onDelete: Cascade)
}

// ##########----------Financial Disbursement Mode Model----------##########
model FinancialDisbursementMode {
    id              String  @id @default(uuid())
    masterProductId String?
    disbursementId  String?

    masterProduct    MasterProduct?    @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    disbursementMode DisbursementMode? @relation(fields: [disbursementId], references: [id], onDelete: Cascade)
}

// ##########----------Financial Repayment Mode Model----------##########
model FinancialRepaymentMode {
    id              String  @id @default(uuid())
    masterProductId String?
    repaymentId     String?
    masterProduct  MasterProduct?  @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    RepaymentModes RepaymentModes? @relation(fields: [repaymentId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Financial Terms----------##########
model FinancialTerms {
    id                  String       @id @default(uuid())
    masterProductId     String       @unique
    minLoanAmount       Int
    maxLoanAmount       Int
    minTenureMonths     Int
    maxTenureMonths     Int
    interestRateType    InterestType
    interestRateMin     Float
    interestRateMax     Float
    processingFeeType   FeeType
    processingFeeValue  Float
    latePaymentFeeType  FeeType
    latePaymentFeeValue Float
    prepaymentAllowed   Boolean
    prepaymentFeeType   FeeType
    prepaymentFeeValue  Float
    overallGst          Float        @default(0.0)
    emiFrequency        EMIFrequency
    penalApplicable     Boolean      @default(false)
    penalRate           Float        @default(0.0)
    gracePeriod         Int          @default(0)
    renewalFee          Float        @default(0.0)

    masterProduct MasterProduct @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Fee Structure Model----------##########
model EligibilityCriteria {
    id                  String  @id @default(uuid())
    masterProductId     String  @unique
    minAge              Int
    maxAge              Int
    minMonthlyIncome    Int
    minBusinessVintage  Int
    minBureauScore      Int
    coApplicantRequired Boolean @default(false)
    collateralRequired  Boolean @default(false)

    masterProduct MasterProduct @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Security Compliance Model----------##########
model CreditBureauConfig {
    id                      String            @id @default(uuid())
    masterProductId         String            @unique
    creditBureauSources     BureauType[]
    minScoreRequired        Int
    maxActiveLoans          Int
    maxCreditUtilization    Float
    enquiriesLast6Months    Int
    loanDelinquencyAllowed  DelinquencyOption
    bureauDataFreshnessDays Int
    scoreDecayTolerance     Int

    masterProduct MasterProduct @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Other Charges Model----------##########
model MasterProductOtherCharges {
    id                 String   @id @default(uuid())
    masterProductId    String   @unique
    chequeBounceCharge Int?
    dublicateNocCharge Int?
    furnishingCharge   Int?
    chequeSwapCharge   Int?
    revocation         Int?
    documentCopyCharge Int?
    stampDutyCharge    Int?
    nocCharge          Int?
    incidentalCharge   Int?
    createdAt          DateTime @default(now())
    updatedAt          DateTime @updatedAt
    isDeleted          Boolean  @default(false)

    masterProduct MasterProduct? @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}

// ##########----------Product Document Model----------##########
model Document {
    id        String   @id @default(uuid())
    name      String?
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    isDeleted Boolean  @default(false)

    ProductDocuments ProductDocuments[]
}

// ##########----------Master Product Documents Model----------##########
model MasterProductDocument {
    id              String   @id @default(uuid())
    masterProductId String   @unique
    employmentType  String
    createdAt       DateTime @default(now())
    updatedAt       DateTime @updatedAt
    isDeleted       Boolean  @default(false)

    masterProduct MasterProduct? @relation(fields: [masterProductId], references: [id], onDelete: Cascade)

    ProductDocuments ProductDocuments[]
}

// ##########----------Document Model----------##########
model ProductDocuments {
    id                String @id @default(uuid())
    documentId        String
    productDocumentId String

    Document              Document              @relation(fields: [documentId], references: [id], onDelete: Cascade)
    MasterProductDocument MasterProductDocument @relation(fields: [productDocumentId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Version Model----------##########
model MasterProductVersion {
    id              String   @id @default(uuid())
    masterProductId String
    versionId       Int
    snapshot        Json
    createdAt       DateTime @default(now())

    masterProduct MasterProduct @relation(fields: [masterProductId], references: [id])
}

// ##########----------Master Product Delete Request Model----------##########
model MasterProductDeleteRequest {
    id              String        @id @default(uuid())
    masterProductId String
    requestedById   String
    status          RequestStatus @default(PENDING)
    reason          String?
    createdAt       DateTime      @default(now())
    updatedAt       DateTime      @updatedAt
    isDeleted       Boolean       @default(false)

    masterProduct MasterProduct     @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    requestedBy   AssociateSubAdmin @relation(fields: [requestedById], references: [id], onDelete: Cascade)
}
