// ##########----------Product Category Model----------##########
model ProductCategory {
    id           String   @id @default(uuid())
    categoryName String?  @db.VarChar(100)
    createdAt    DateTime @default(now())
    updatedAt    DateTime @updatedAt
    isDeleted    Boolean  @default(false)

    ProductPurpose ProductPurpose[]
    MasterProduct  MasterProduct[]
}

// ##########----------Product Purpose Model----------##########
model ProductPurpose {
    id                String   @id @default(uuid())
    productCategoryId String?
    purpose           String?
    createdAt         DateTime @default(now())
    updatedAt         DateTime @updatedAt
    isDeleted         Boolean  @default(false)

    productCategory             ProductCategory?             @relation(fields: [productCategoryId], references: [id], onDelete: Cascade)
    MasterProductPurpose        MasterProductPurpose[]
    masterProductPurposeUpdates MasterProductPurposeUpdate[]
}

// ##########----------Product Common UseCase Model----------##########
model CommonUseCase {
    id                                String                             @id @default(uuid())
    name                              String?                            @db.VarChar(100)
    createdAt                         DateTime                           @default(now())
    updatedAt                         DateTime                           @updatedAt
    isDeleted                         Boolean                            @default(false)
    MasterProductCommonUseCase        MasterProductCommonUseCase[]
    masterProductCommonUseCaseUpdates MasterProductCommonUseCaseUpdate[]
}

// ##########----------Target Customer Type Model----------##########
model CustomerType {
    id                               String                            @id @default(uuid())
    name                             String?                           @db.VarChar(100)
    createdAt                        DateTime                          @default(now())
    updatedAt                        DateTime                          @updatedAt
    isDeleted                        Boolean                           @default(false)
    MasterProductCustomerType        MasterProductCustomerType[]
    masterProductCustomerTypeUpdates MasterProductCustomerTypeUpdate[]
}

// ##########----------Master Product Model----------##########
model MasterProduct {
    id                 String      @id @default(uuid())
    productManagerId   String?
    productCategoryId  String?
    productType        ProductType
    versionId          Int
    productName        String?     @db.VarChar(100)
    productCode        String?     @db.VarChar(100)
    productDescription String?     @db.VarChar(100)
    createdAt          DateTime    @default(now())
    updatedAt          DateTime    @updatedAt
    isDeleted          Boolean     @default(false)

    productCategory ProductCategory?   @relation(fields: [productCategoryId], references: [id], onDelete: Cascade)
    productManager  AssociateSubAdmin? @relation(fields: [productManagerId], references: [id], onDelete: Cascade)

    MasterProductLoanStructure      MasterProductLoanStructure?
    MasterProductFeeStructure       MasterProductFeeStructure?
    MasterProductSecurityCompliance MasterProductSecurityCompliance?
    MasterProductDisbursementRules  MasterProductDisbursementRules?
    MasterProductPerformance        MasterProductPerformance?
    MasterProductPurpose            MasterProductPurpose[]
    MasterProductCommonUseCase      MasterProductCommonUseCase[]
    MasterProductCustomerType       MasterProductCustomerType[]
    VariantProduct                  VariantProduct[]
    MasterProductUpdateRequest      MasterProductUpdateRequest[]
    MasterProductVersion            MasterProductVersion[]
}

// ##########----------Master Product Purpose Model Starts's here----------##########
model MasterProductPurpose {
    id              String @id @default(uuid())
    masterProductId String
    purposeId       String

    masterProduct  MasterProduct  @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    productPurpose ProductPurpose @relation(fields: [purposeId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Common UseCase Model Starts's here----------##########
model MasterProductCommonUseCase {
    id              String @id @default(uuid())
    masterProductId String
    commonuseCaseId String

    masterProduct MasterProduct @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    commonuseCase CommonUseCase @relation(fields: [commonuseCaseId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Customer Type Model Starts's here----------##########
model MasterProductCustomerType {
    id              String @id @default(uuid())
    masterProductId String
    customerTypeId  String

    masterProduct MasterProduct @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    customerType  CustomerType  @relation(fields: [customerTypeId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Loan Structure Model----------##########
model MasterProductLoanStructure {
    id                          String       @id @default(uuid())
    masterProductId             String       @unique
    minLoanAmount               Int?
    maxLoanAmount               Int?
    tenureType                  TenureType
    tenureUnit                  TenureUnit
    minTenure                   Int?
    maxTenure                   Int?
    allowedTenureValues         String?      @db.VarChar(50)
    defaultTenure               String?      @db.VarChar(50)
    isTenureBasedOnPaymentCycle Boolean?
    tenureCalcLogic             String?      @db.VarChar(50)
    allowRepaymentOverride      Boolean?
    interestType                InterestType
    interestRate                Int?
    gracePeriod                 Int?
    penalInterestRate           Int?
    moratoriumPeriod            Int?
    repaymentMethod             String?      @db.VarChar(50)
    latePaymentFee              Int?
    prePaymentAllowed           Boolean?
    paymentCharges              Int?
    lockinPeriod                Int?
    createdAt                   DateTime     @default(now())
    updatedAt                   DateTime     @updatedAt
    isDeleted                   Boolean      @default(false)

    masterProduct MasterProduct? @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Fee Structure Model----------##########
model MasterProductFeeStructure {
    id                   String   @id @default(uuid())
    masterProductId      String   @unique
    processingFee        Int?
    processingFeeGst     Int?
    setupFee             Int?
    setupFeeGst          Int?
    subscriptionOption   Boolean?
    perTransactionFee    Int?
    perTransactionFeeGst Int?
    insuranceCharge      Int?
    insuranceChargeGst   Int?
    otherCharges         Int?
    otherChargesGst      Int?
    createdAt            DateTime @default(now())
    updatedAt            DateTime @updatedAt
    isDeleted            Boolean  @default(false)

    masterProduct MasterProduct? @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Security Compliance Model----------##########
model MasterProductSecurityCompliance {
    id                    String                @id @default(uuid())
    masterProductId       String                @unique
    collateralRequired    Boolean?
    collateralType        CollateralType?
    kycRequired           Boolean?
    coBorrowerRequired    Boolean?
    insuranceBundeled     Boolean?
    creditBureauMandatory Boolean?
    minCibil              Int?
    concentFormat         ConcentCaptureFormat?
    defaultReporting      Int?
    riskCategory          RiskCategory?
    createdAt             DateTime              @default(now())
    updatedAt             DateTime              @updatedAt
    isDeleted             Boolean               @default(false)

    masterProduct MasterProduct? @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Disbursement Rule Model----------##########
model MasterProductDisbursementRules {
    id                String             @id @default(uuid())
    masterProductId   String             @unique
    disbursementMode  DisbursementModes?
    varientAllowed    Boolean?
    apiEnabledProduct Boolean?
    createdAt         DateTime           @default(now())
    updatedAt         DateTime           @updatedAt
    isDeleted         Boolean            @default(false)

    masterProduct MasterProduct? @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Performance Model----------##########
model MasterProductPerformance {
    id                          String   @id @default(uuid())
    masterProductId             String   @unique
    monitoringType              String?
    delinquencyTriggerThreshold String?
    portfolioCap                Int?
    reviewCycle                 String?
    createdAt                   DateTime @default(now())
    updatedAt                   DateTime @updatedAt
    isDeleted                   Boolean  @default(false)

    masterProduct MasterProduct? @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Version Model----------##########
model MasterProductVersion {
    id              String   @id @default(uuid())
    masterProductId String
    versionId       Int
    snapshot        Json
    createdAt       DateTime @default(now())

    masterProduct MasterProduct @relation(fields: [masterProductId], references: [id])
}
