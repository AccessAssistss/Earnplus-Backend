// ##########----------Master Product Model----------##########
model MasterProduct {
    id                 String        @id @default(uuid())
    productId          String?       @db.VarChar(100)
    productManagerId   String?
    versionId          Int
    productCode        String?       @db.VarChar(100)
    productName        String?       @db.VarChar(200)
    productCategoryId  String?
    loanTypeId         String
    partnerId          String?
    productDescription String?       @db.Text
    status             ProductStatus @default(Draft)
    createdAt          DateTime      @default(now())
    updatedAt          DateTime      @updatedAt
    isDeleted          Boolean       @default(false)

    productCategory ProductCategory?   @relation(fields: [productCategoryId], references: [id], onDelete: Cascade)
    productManager  AssociateSubAdmin? @relation(fields: [productManagerId], references: [id], onDelete: Cascade)
    loanType        LoanType?          @relation(fields: [loanTypeId], references: [id], onDelete: Cascade)
    productPartner  ProductPartner?    @relation(fields: [partnerId], references: [id], onDelete: Cascade)

    financialTerms            FinancialTerms?
    eligibilityCriteria       EligibilityCriteria?
    creditBureauConfig        CreditBureauConfig?
    masterProductOtherCharges MasterProductOtherCharges?
    MasterProductFields       MasterProductFields?

    MasterProductPurpose         MasterProductPurpose[]
    FinancialDisbursementMode    FinancialDisbursementMode[]
    FinancialRepaymentMode       FinancialRepaymentMode[]
    VariantProduct               VariantProduct[]
    MasterProductVersion         MasterProductVersion[]
    MasterProductSegment         MasterProductSegment[]
    LoanApplication              LoanApplication[]
    ProductCreditAssignmentRule  ProductCreditAssignmentRule[]
    MasterProductUpdateRequest   MasterProductUpdateRequest[]
    MasterProductDeleteRequest   MasterProductDeleteRequest[]
    MasterProductDeliveryChannel MasterProductDeliveryChannel[]
}

// ##########----------Master Product Purpose Model----------##########
model MasterProductPurpose {
    id              String @id @default(uuid())
    masterProductId String
    purposeId       String

    masterProduct  MasterProduct  @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    productPurpose ProductPurpose @relation(fields: [purposeId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Segment Model----------##########
model MasterProductSegment {
    id              String @id @default(uuid())
    masterProductId String
    segmentId       String

    masterProduct  MasterProduct  @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    productSegment ProductSegment @relation(fields: [segmentId], references: [id], onDelete: Cascade)
}

// ##########----------Financial Disbursement Mode Model----------##########
model FinancialDisbursementMode {
    id              String  @id @default(uuid())
    masterProductId String?
    disbursementId  String?

    masterProduct    MasterProduct?    @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    disbursementMode DisbursementMode? @relation(fields: [disbursementId], references: [id], onDelete: Cascade)
}

// ##########----------Financial Repayment Mode Model----------##########
model FinancialRepaymentMode {
    id              String          @id @default(uuid())
    masterProductId String?
    repaymentId     String?
    masterProduct   MasterProduct?  @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    RepaymentModes  RepaymentModes? @relation(fields: [repaymentId], references: [id], onDelete: Cascade)
}

// ##########----------Dilevery Channel Model----------##########
model MasterProductDeliveryChannel {
    id                String @id @default(uuid())
    masterProductId   String
    deliveryChannelId String

    masterProduct   MasterProduct   @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    deliveryChannel DeliveryChannel @relation(fields: [deliveryChannelId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Financial Terms----------##########
model FinancialTerms {
    id                  String       @id @default(uuid())
    masterProductId     String       @unique
    minLoanAmount       Int
    maxLoanAmount       Int
    minTenureMonths     Int
    maxTenureMonths     Int
    interestRateType    InterestType
    interestRateMin     Float
    interestRateMax     Float
    processingFeeType   FeeType
    processingFeeValue  Float
    latePaymentFeeType  FeeType
    latePaymentFeeValue Float
    prepaymentAllowed   Boolean
    prepaymentFeeType   FeeType
    prepaymentFeeValue  Float
    overallGst          Float        @default(0.0)
    emiFrequency        EMIFrequency
    penalApplicable     Boolean      @default(false)
    penalRate           Float        @default(0.0)
    gracePeriod         Int          @default(0)
    renewalFee          Float        @default(0.0)

    masterProduct MasterProduct @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Fee Structure Model----------##########
model EligibilityCriteria {
    id                  String  @id @default(uuid())
    masterProductId     String  @unique
    minAge              Int
    maxAge              Int
    minMonthlyIncome    Int
    minBusinessVintage  Int
    minBureauScore      Int
    coApplicantRequired Boolean @default(false)
    collateralRequired  Boolean @default(false)

    masterProduct MasterProduct @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Security Compliance Model----------##########
model CreditBureauConfig {
    id                      String            @id @default(uuid())
    masterProductId         String            @unique
    creditBureauSources     BureauType[]
    minScoreRequired        Int
    maxActiveLoans          Int
    maxCreditUtilization    Float
    enquiriesLast6Months    Int
    loanDelinquencyAllowed  DelinquencyOption
    bureauDataFreshnessDays Int
    scoreDecayTolerance     Int

    masterProduct MasterProduct @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Other Charges Model----------##########
model MasterProductOtherCharges {
    id                 String   @id @default(uuid())
    masterProductId    String   @unique
    chequeBounceCharge Int?
    dublicateNocCharge Int?
    furnishingCharge   Int?
    chequeSwapCharge   Int?
    revocation         Int?
    documentCopyCharge Int?
    stampDutyCharge    Int?
    nocCharge          Int?
    incidentalCharge   Int?
    createdAt          DateTime @default(now())
    updatedAt          DateTime @updatedAt
    isDeleted          Boolean  @default(false)

    masterProduct MasterProduct? @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Field Model----------##########
model MasterProductFields {
    id              String   @id @default(uuid())
    masterProductId String   @unique
    fieldsJsonData  Json?
    createdAt       DateTime @default(now())
    updatedAt       DateTime @updatedAt
    isDeleted       Boolean  @default(false)

    masterProduct MasterProduct? @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}

// ##########----------Product Credit Assignment Rule Model----------##########
model ProductCreditAssignmentRule {
    id              String   @id @default(uuid())
    masterProductId String
    creditRole      String
    minScore        Int
    maxScore        Int
    createdAt       DateTime @default(now())
    updatedAt       DateTime @default(now()) @updatedAt
    isDeleted       Boolean  @default(false)

    masterProduct MasterProduct @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Version Model----------##########
model MasterProductVersion {
    id              String   @id @default(uuid())
    masterProductId String
    versionId       Int
    snapshot        Json
    createdAt       DateTime @default(now())

    masterProduct MasterProduct @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
}
