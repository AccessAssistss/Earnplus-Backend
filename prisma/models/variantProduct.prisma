// ##########----------Varient Product Model----------##########
model VariantProduct {
    id               String      @id @default(uuid())
    masterProductId  String
    productManagerId String
    productType      ProductType
    variantName      String      @db.VarChar(150)
    variantType      String      @db.VarChar(30)
    variantCode      String      @db.VarChar(60)
    versionId        Int
    remark           String
    createdAt        DateTime    @default(now())
    updatedAt        DateTime    @updatedAt
    isDeleted        Boolean     @default(false)

    masterProduct  MasterProduct      @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    productManager AssociateSubAdmin? @relation(fields: [productManagerId], references: [id], onDelete: Cascade)

    VariantProductEligibility      VariantProductEligibility?
    VariantProductFeeStructure     VariantProductFeeStructure?
    VariantProductWithdrawLogic    VariantProductWithdrawLogic?
    VariantProductRepayment        VariantProductRepayment?
    VariantProductValidity         VariantProductValidity?
    VariantProductUpdateRequest    VariantProductUpdateRequest[]
    VariantProductVersion          VariantProductVersion[]
    AssignVariantProductToEmployer AssignVariantProductToEmployer[]
    AllocateProductToEmployer      AllocateProductToEmployer[]
    queries                        RaiseQuery[]
}

// ##########----------Varient Product Eligibility Model----------##########
model VariantProductEligibility {
    id                String            @id @default(uuid())
    varientProductId  String            @unique
    minEmploymentDays ProductType
    disbursementMode  DisbursementModes
    minSalary         String            @db.VarChar(30)
    maxSalary         String            @db.VarChar(60)
    paymentFrequency  String
    createdAt         DateTime          @default(now())
    updatedAt         DateTime          @updatedAt
    isDeleted         Boolean           @default(false)

    varientProduct VariantProduct @relation(fields: [varientProductId], references: [id], onDelete: Cascade)
}

// ##########----------Variant Product Fee Structure Model----------##########
model VariantProductFeeStructure {
    id                 String   @id @default(uuid())
    variantProductId   String   @unique
    setupFee           Int?
    perTransactionFee  Int?
    subscriptionOption Boolean?
    feePayer           String?
    gst                Int?
    penalty            Int?
    insuranceFee       Int?
    insuranceCalcOn    Int?
    createdAt          DateTime @default(now())
    updatedAt          DateTime @updatedAt
    isDeleted          Boolean  @default(false)

    variantProduct VariantProduct? @relation(fields: [variantProductId], references: [id], onDelete: Cascade)
}

// ##########----------Variant Product Withdrawl Logic Model----------##########
model VariantProductWithdrawLogic {
    id                   String   @id @default(uuid())
    variantProductId     String   @unique
    minWithdrawAmount    Int?
    maxWithdrawAmount    Int?
    minAccrued           Int?
    maxAccrued           Int?
    maxWithdrawlPerMonth Int?
    frequencyRule        String?
    createdAt            DateTime @default(now())
    updatedAt            DateTime @updatedAt
    isDeleted            Boolean  @default(false)

    variantProduct VariantProduct? @relation(fields: [variantProductId], references: [id], onDelete: Cascade)
}

// ##########----------Variant Product Repayment Model----------##########
model VariantProductRepayment {
    id               String         @id @default(uuid())
    variantProductId String         @unique
    repaymentMode    RepaymentMode?
    eNachRequired    Boolean
    autoDebit        Boolean
    createdAt        DateTime       @default(now())
    updatedAt        DateTime       @updatedAt
    isDeleted        Boolean        @default(false)

    variantProduct VariantProduct? @relation(fields: [variantProductId], references: [id], onDelete: Cascade)
}

// ##########----------Variant Product Validity Model----------##########
model VariantProductValidity {
    id               String    @id @default(uuid())
    variantProductId String    @unique
    activationDate   DateTime?
    validityPeriod   DateTime
    workLocation     String
    minSalary        Int
    maxSalary        Int
    createdAt        DateTime  @default(now())
    updatedAt        DateTime  @updatedAt
    isDeleted        Boolean   @default(false)

    variantProduct VariantProduct? @relation(fields: [variantProductId], references: [id], onDelete: Cascade)
}

// ##########----------Variant Product Version Model----------##########
model VariantProductVersion {
    id               String   @id @default(uuid())
    variantProductId String
    versionId        Int
    snapshot         Json
    createdAt        DateTime @default(now())
    updatedAt        DateTime @updatedAt

    variantProduct VariantProduct @relation(fields: [variantProductId], references: [id], onDelete: Cascade)
}

// ##########----------Assign Variant Product To Employer----------##########
model AssignVariantProductToEmployer {
    id               String   @id @default(uuid())
    variantProductId String
    employerId       String
    aasignmentDate   DateTime
    endDate          DateTime
    employerNote     String
    createdAt        DateTime @default(now())
    updatedAt        DateTime @updatedAt

    variantProduct VariantProduct @relation(fields: [variantProductId], references: [id], onDelete: Cascade)
    employer       Employer       @relation(fields: [employerId], references: [id], onDelete: Cascade)
}
