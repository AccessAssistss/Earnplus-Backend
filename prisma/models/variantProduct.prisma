// ##########----------Varient Product Model----------##########
model VariantProduct {
    id               String      @id @default(uuid())
    variantId        String      @db.VarChar(60)
    masterProductId  String
    productManagerId String
    versionId        Int
    variantCode      String      @db.VarChar(60)
    variantName      String      @db.VarChar(150)
    productType      ProductType
    variantType      String      @db.VarChar(30)
    partnerId        String?
    remark           String
    createdAt        DateTime    @default(now())
    updatedAt        DateTime    @updatedAt
    isDeleted        Boolean     @default(false)

    masterProduct  MasterProduct      @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    productManager AssociateSubAdmin? @relation(fields: [productManagerId], references: [id], onDelete: Cascade)
    productPartner ProductPartner?    @relation(fields: [partnerId], references: [id], onDelete: Cascade)

    VariantProductParameter        VariantProductParameter?
    VariantProductOtherCharges     VariantProductOtherCharges?
    VariantProductRepayment        VariantProductRepayment?
    VariantProductVersion          VariantProductVersion[]
    AssignVariantProductToEmployer AssignVariantProductToEmployer[]
    AllocateProductToEmployer      AllocateProductToEmployer[]
    queries                        RaiseQuery[]
    VariantProductUpdateRequest    VariantProductUpdateRequest[]
    VariantProductDeleteRequest    VariantProductDeleteRequest[]
}

// ##########----------Variant Product Parameter Model----------##########
model VariantProductParameter {
    id                      String       @id @default(uuid())
    variantProductId        String       @unique
    minLoanAmount           Int
    maxLoanAmount           Int
    minTenureMonths         Int
    maxTenureMonths         Int
    interestRateType        InterestType
    interestRateMin         Float
    interestRateMax         Float
    processingFeeType       FeeType
    processingFeeValue      Float
    latePaymentFeeType      FeeType
    latePaymentFeeValue     Float
    penalInterestApplicable Boolean
    emiFrequency            EMIFrequency
    prepaymentFeeType       FeeType
    prepaymentFeeValue      Float
    penalInterestRate       Int
    minAge                  Int
    maxAge                  Int

    variantProduct VariantProduct? @relation(fields: [variantProductId], references: [id], onDelete: Cascade)
}

// ##########----------Variant Product Other Charges Model----------##########
model VariantProductOtherCharges {
    id                 String   @id @default(uuid())
    variantProductId   String   @unique
    chequeBounceCharge Int?
    dublicateNocCharge Int?
    furnishingCharge   Int?
    chequeSwapCharge   Int?
    revocation         Int?
    documentCopyCharge Int?
    stampDutyCharge    Int?
    nocCharge          Int?
    incidentalCharge   Int?
    createdAt          DateTime @default(now())
    updatedAt          DateTime @updatedAt
    isDeleted          Boolean  @default(false)

    variantProduct VariantProduct? @relation(fields: [variantProductId], references: [id], onDelete: Cascade)
}

// ##########----------Variant Product Repayment Model----------##########
model VariantProductRepayment {
    id                          String   @id @default(uuid())
    variantProductId            String   @unique
    penalInterestApplicable     Boolean
    incentiveType               String?
    incentiveValue              Int?
    payoutMode                  String?
    incentiveReversalConditions String?
    createdAt                   DateTime @default(now())
    updatedAt                   DateTime @updatedAt
    isDeleted                   Boolean  @default(false)

    variantProduct VariantProduct? @relation(fields: [variantProductId], references: [id], onDelete: Cascade)
}

// ##########----------Variant Product Version Model----------##########
model VariantProductVersion {
    id               String   @id @default(uuid())
    variantProductId String
    versionId        Int
    snapshot         Json
    createdAt        DateTime @default(now())
    updatedAt        DateTime @updatedAt

    variantProduct VariantProduct @relation(fields: [variantProductId], references: [id], onDelete: Cascade)
}

// ##########----------Assign Variant Product To Employer----------##########
model AssignVariantProductToEmployer {
    id               String   @id @default(uuid())
    variantProductId String
    employerId       String
    assignmentDate   DateTime
    endDate          DateTime
    employerNote     String
    createdAt        DateTime @default(now())
    updatedAt        DateTime @updatedAt
    isDeleted        Boolean  @default(false)

    variantProduct VariantProduct @relation(fields: [variantProductId], references: [id], onDelete: Cascade)
    employer       Employer       @relation(fields: [employerId], references: [id], onDelete: Cascade)
}
