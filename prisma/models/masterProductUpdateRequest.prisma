// ##########----------Master Product Update Model----------##########
model MasterProductUpdateRequest {
    id              String   @id @default(uuid())
    masterProductId String
    createdById     String
    isApproved      Boolean? @default(false)
    isRejected      Boolean? @default(false)
    rejectionReason String?  @db.VarChar(255)
    createdAt       DateTime @default(now())
    updatedAt       DateTime @updatedAt
    isDeleted       Boolean  @default(false)

    masterProduct MasterProduct     @relation(fields: [masterProductId], references: [id], onDelete: Cascade)
    createdBy     AssociateSubAdmin @relation(fields: [createdById], references: [id], onDelete: Cascade)

    masterProductCoreUpdate         MasterProductCoreUpdate?
    masterProductLoanUpdate         MasterProductLoanStructureUpdate?
    masterProductFeeUpdate          MasterProductFeeStructureUpdate?
    masterProductComplianceUpdate   MasterProductSecurityComplianceUpdate?
    masterProductDisbursementUpdate MasterProductDisbursementRulesUpdate?
    masterProductPerformanceUpdate  MasterProductPerformanceUpdate?
    masterProductPurposeUpdates     MasterProductPurposeUpdate[]
    masterProductUseCaseUpdates     MasterProductCommonUseCaseUpdate[]
    masterProductCustomerUpdates    MasterProductCustomerTypeUpdate[]
}

model MasterProductCoreUpdate {
    id                 String      @id @default(uuid())
    updateRequestId    String      @unique
    productCategoryId  String?
    productType        ProductType
    productName        String?     @db.VarChar(100)
    productCode        String?     @db.VarChar(100)
    productDescription String?     @db.VarChar(100)
    createdAt          DateTime    @default(now())
    updatedAt          DateTime    @updatedAt

    updateRequest MasterProductUpdateRequest @relation(fields: [updateRequestId], references: [id], onDelete: Cascade)
}

// ##########----------Loan Structure Update Model----------##########
model MasterProductLoanStructureUpdate {
    id                          String       @id @default(uuid())
    updateRequestId             String       @unique
    minLoanAmount               Int?
    maxLoanAmount               Int?
    tenureType                  TenureType
    tenureUnit                  TenureUnit
    minTenure                   Int?
    maxTenure                   Int?
    allowedTenureValues         String?      @db.VarChar(50)
    defaultTenure               String?      @db.VarChar(50)
    isTenureBasedOnPaymentCycle Boolean?
    tenureCalcLogic             String?      @db.VarChar(50)
    allowRepaymentOverride      Boolean?
    interestType                InterestType
    interestRate                Int?
    gracePeriod                 Int?
    penalInterestRate           Int?
    moratoriumPeriod            Int?
    repaymentMethod             String?      @db.VarChar(50)
    latePaymentFee              Int?
    prePaymentAllowed           Boolean?
    paymentCharges              Int?
    lockinPeriod                Int?
    createdAt                   DateTime     @default(now())
    updatedAt                   DateTime     @updatedAt

    updateRequest MasterProductUpdateRequest @relation(fields: [updateRequestId], references: [id], onDelete: Cascade)
}

// ##########----------Fee Structure Update Model----------##########
model MasterProductFeeStructureUpdate {
    id                   String   @id @default(uuid())
    updateRequestId      String   @unique
    processingFee        Int?
    processingFeeGst     Int?
    setupFee             Int?
    setupFeeGst          Int?
    subscriptionOption   Boolean?
    perTransactionFee    Int?
    perTransactionFeeGst Int?
    insuranceCharge      Int?
    insuranceChargeGst   Int?
    otherCharges         Int?
    otherChargesGst      Int?
    createdAt            DateTime @default(now())
    updatedAt            DateTime @updatedAt

    updateRequest MasterProductUpdateRequest @relation(fields: [updateRequestId], references: [id], onDelete: Cascade)
}

// ##########----------Security Compliance Update Model----------##########
model MasterProductSecurityComplianceUpdate {
    id                    String                @id @default(uuid())
    updateRequestId       String                @unique
    collateralRequired    Boolean?
    collateralType        CollateralType?
    kycRequired           Boolean?
    coBorrowerRequired    Boolean?
    insuranceBundeled     Boolean?
    creditBureauMandatory Boolean?
    minCibil              Int?
    concentFormat         ConcentCaptureFormat?
    defaultReporting      Int?
    riskCategory          RiskCategory?
    createdAt             DateTime              @default(now())
    updatedAt             DateTime              @updatedAt

    updateRequest MasterProductUpdateRequest @relation(fields: [updateRequestId], references: [id], onDelete: Cascade)
}

// ##########----------Disbursement Rule Update Model----------##########
model MasterProductDisbursementRulesUpdate {
    id                String             @id @default(uuid())
    updateRequestId   String             @unique
    disbursementMode  DisbursementModes?
    varientAllowed    Boolean?
    apiEnabledProduct Boolean?
    createdAt         DateTime           @default(now())
    updatedAt         DateTime           @updatedAt

    updateRequest MasterProductUpdateRequest @relation(fields: [updateRequestId], references: [id], onDelete: Cascade)
}

// ##########----------Performance Update Model----------##########
model MasterProductPerformanceUpdate {
    id                          String   @id @default(uuid())
    updateRequestId             String   @unique
    monitoringType              String?
    delinquencyTriggerThreshold String?
    portfolioCap                Int?
    reviewCycle                 String?
    createdAt                   DateTime @default(now())
    updatedAt                   DateTime @updatedAt

    updateRequest MasterProductUpdateRequest @relation(fields: [updateRequestId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Purpose Update Model----------##########
model MasterProductPurposeUpdate {
    id              String @id @default(uuid())
    updateRequestId String
    purposeId       String

    updateRequest  MasterProductUpdateRequest @relation(fields: [updateRequestId], references: [id], onDelete: Cascade)
    productPurpose ProductPurpose             @relation(fields: [purposeId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Common UseCase Update Model----------##########
model MasterProductCommonUseCaseUpdate {
    id              String @id @default(uuid())
    updateRequestId String
    commonUseCaseId String

    updateRequest MasterProductUpdateRequest @relation(fields: [updateRequestId], references: [id], onDelete: Cascade)
    commonUseCase CommonUseCase              @relation(fields: [commonUseCaseId], references: [id], onDelete: Cascade)
}

// ##########----------Master Product Customer Type Update Model----------##########
model MasterProductCustomerTypeUpdate {
    id              String @id @default(uuid())
    updateRequestId String
    customerTypeId  String

    updateRequest MasterProductUpdateRequest @relation(fields: [updateRequestId], references: [id], onDelete: Cascade)
    customerType  CustomerType               @relation(fields: [customerTypeId], references: [id], onDelete: Cascade)
}
