// ##########----------Employee Profile Model----------##########
model Employee {
    id                    String         @id @default(uuid())
    userId                String?        @unique
    employerId            String?
    customEmployeeId      String?
    employeeId            String?
    kycStatus             KycStatus      @default(Pending)
    employeeName          String?        @db.VarChar(100)
    email                 String?        @db.VarChar(100)
    mobile                String         @db.VarChar(10)
    alternativeMobile     String?        @db.VarChar(10)
    gender                Gender?
    fcmToken              String?        @db.VarChar(100)
    dob                   DateTime?
    designation           String?        @db.VarChar(100)
    employmentType        String?        @db.VarChar(100)
    educationLevel        String?        @db.VarChar(100)
    nationality           String?        @db.VarChar(100)
    panNo                 String?        @db.VarChar(100)
    aadharNo              String?        @db.VarChar(100)
    maritalStatus         MaritalStatus?
    hireDate              DateTime?
    salaryDate            DateTime?
    address               String?
    countryId             String?
    city                  String?        @db.VarChar(100)
    stateId               String?
    pincode               String?        @db.VarChar(100)
    otpExpiration         DateTime       @default(now())
    otp                   String?        @db.VarChar(100)
    createdAt             DateTime       @default(now())
    updatedAt             DateTime       @updatedAt
    isDeleted             Boolean        @default(false)
    isEmployerLinked      Boolean        @default(false)
    isExistingUser        Boolean        @default(false)
    isKycVerified         Boolean        @default(false)
    isEmployerScreen      Boolean        @default(false)
    agreedProductInsight  Boolean        @default(false)
    agreedToMessageViaApp Boolean        @default(false)
    agreedPolicyInsight   Boolean        @default(false)
    totalQuizPoints       Int            @default(0)

    employer Employer?   @relation(fields: [employerId], references: [id], onDelete: Cascade)
    user     CustomUser? @relation(fields: [userId], references: [id], onDelete: Cascade)
    country  Country?    @relation(fields: [countryId], references: [id])
    state    State?      @relation(fields: [stateId], references: [id])

    EmployeeVerification      EmployeeVerification?
    EmploymentDetails         EmploymentDetails?
    KYCRequest                KYCRequest?
    CrifReport                CrifReport?
    EmployeeBankDetails       EmployeeBankDetails[]
    EmployeeCurrentPayroll    EmployeeCurrentPayroll[]
    EmployeeBasePayroll       EmployeeBasePayroll[]
    EmployeeHistoricalPayroll EmployeeHistoricalPayroll[]
    LoanApplication           LoanApplication[]
    EmployeeQuizResponse      EmployeeQuizResponse[]
    EmployeeQuery             EmployeeQuery[]
}

// ##########----------Employee Bank Detail Model----------##########
model EmploymentDetails {
    id                String    @id @default(uuid())
    employeeId        String?   @unique
    partnerEmployeeId String?   @db.VarChar(100)
    dateJoined        DateTime?
    jobTitle          String?
    department        String?   @db.VarChar(100)
    workLocationId    String?
    contractTypeId    String?
    paymentCycleId    String?
    isDeleted         Boolean   @default(false)
    createdAt         DateTime  @default(now())
    updatedAt         DateTime  @updatedAt

    employee                        Employee?                        @relation(fields: [employeeId], references: [id])
    employerLocationDetails         EmployerLocationDetails?         @relation(fields: [workLocationId], references: [id])
    employerContractType            EmployerContractType?            @relation(fields: [contractTypeId], references: [id])
    employerContractTypeCombination EmployerContractTypeCombination? @relation(fields: [paymentCycleId], references: [id])
}

// ##########----------Employee Bank Detail Model----------##########
model EmployeeBankDetails {
    id         String   @id @default(uuid())
    employeeId String?
    accName    String?  @db.VarChar(100)
    accNumber  String?  @db.VarChar(100)
    bankName   String?  @db.VarChar(100)
    ifsc       String?  @db.VarChar(20)
    isDeleted  Boolean  @default(false)
    createdAt  DateTime @default(now())
    updatedAt  DateTime @updatedAt

    employee Employee? @relation(fields: [employeeId], references: [id])
}

// ##########----------Employee Veification Model----------##########
model EmployeeVerification {
    id               String   @id @default(uuid())
    employeeId       String?  @unique
    panNumber        String?  @db.VarChar(10)
    isPanVerified    Boolean? @default(false)
    aadharNumber     String?  @db.VarChar(12)
    aadharImage      String?  @db.VarChar(50)
    isAadharVerified Boolean? @default(false)
    selfie           String?
    isSelfieVerified Boolean? @default(false)
    createdAt        DateTime @default(now())
    updatedAt        DateTime @updatedAt

    employee Employee? @relation(fields: [employeeId], references: [id], onDelete: Cascade)
}

// ##########----------Employee KYC Request Model----------##########
model KYCRequest {
    id                  String   @id @default(uuid())
    employeeId          String?  @unique
    associateSubAdminId String?
    kycStatus           String?  @default("PENDING")
    createdAt           DateTime @default(now())
    updatedAt           DateTime @updatedAt

    employee          Employee?          @relation(fields: [employeeId], references: [id], onDelete: Cascade)
    associateSubAdmin AssociateSubAdmin? @relation(fields: [associateSubAdminId], references: [id], onDelete: Cascade)
}

// ##########----------Employee CRIF Report Model----------##########
model CrifReport {
    id           String   @id @default(uuid())
    employeeId   String?  @unique
    responseBody Json
    createdAt    DateTime @default(now())
    updatedAt    DateTime @updatedAt

    employee Employee? @relation(fields: [employeeId], references: [id], onDelete: Cascade)
}

// ##########----------Employee Quiz Response Model----------##########
model EmployeeQuizResponse {
    id             String   @id @default(uuid())
    employeeId     String
    quizQuestionId String
    quizAnswerId   String
    pointsEarned   Int
    answeredAt     DateTime @default(now())
    createdAt      DateTime @default(now())
    updatedAt      DateTime @updatedAt

    employee     Employee?     @relation(fields: [employeeId], references: [id], onDelete: Cascade)
    quizQuestion QuizQuestion? @relation(fields: [quizQuestionId], references: [id], onDelete: Cascade)
    quizAnswer   QuizAnswer?   @relation(fields: [quizAnswerId], references: [id], onDelete: Cascade)
}

// ##########----------Employee Query Model----------##########
model EmployeeQuery {
    id          String   @id @default(uuid())
    employeeId  String
    queryType   String
    subject     String
    description String
    file        String?
    status      String   @default("Pending")
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt

    employee Employee? @relation(fields: [employeeId], references: [id], onDelete: Cascade)
}
